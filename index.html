<!doctype html>
<html lang="hi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Happy Birthday my love‚ù§Ô∏è</title>
<style>
  <img src="https://raw.githubusercontent.com/jaiptl1528/birthday-for-my-love/main/meri_photo.jpg" width="300">
  :root{--bg:#071028;--card:#081427;--accent:#ff6b6b;--muted:#9fb0c8}
  body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;background:linear-gradient(180deg,#00111a,#071028);color:#fff;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:18px}
  .wrap{max-width:980px;width:100%;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));border-radius:14px;padding:18px;box-shadow:0 8px 30px rgba(0,0,0,0.6)}
  h1{margin:0;text-align:center;color:var(--accent);font-size:28px}
  .top{display:flex;flex-wrap:wrap;gap:18px;align-items:flex-start;justify-content:center;margin-top:12px}
  .left{flex:1;min-width:260px;text-align:center}
  .cake{position:relative;margin:6px auto 0;width:240px;height:180px}
  .plate{position:absolute;left:50%;transform:translateX(-50%);bottom:0;width:260px;height:22px;background:linear-gradient(90deg,#ecf0f3,#dfe8f3);border-radius:12px}
  .body{position:absolute;left:50%;transform:translateX(-50%);bottom:22px;width:220px;height:120px;background:linear-gradient(180deg,#ffb3b3,#ff6b6b);border-radius:12px}
  .candle{position:absolute;left:50%;transform:translateX(-50%);bottom:142px;width:12px;height:48px;background:#fff;border-radius:4px;display:flex;align-items:flex-end;justify-content:center}
  .wick{width:3px;height:8px;background:#222;border-radius:2px;margin-bottom:4px}
  .flame{position:absolute;left:50%;transform:translateX(-50%);bottom:182px;width:18px;height:28px;border-radius:50% 50% 50% 50%;background:linear-gradient(180deg,#ffd166,#ff6b6b);filter:drop-shadow(0 6px 12px rgba(255,120,80,0.2));animation:flicker 300ms infinite;pointer-events:none}
  .flame.hidden{display:none}
  @keyframes flicker{0%{transform:translateX(-50%) scaleY(1)}50%{transform:translateX(-48%) scaleY(0.95)}100%{transform:translateX(-50%) scaleY(1)}}
  .controls{margin-top:12px;display:flex;gap:10px;justify-content:center;flex-wrap:wrap}
  button{background:transparent;border:1px solid rgba(255,255,255,0.08);padding:8px 12px;border-radius:10px;color:#fff;cursor:pointer}
  .right{flex:1;min-width:260px}
  .gallery{display:flex;gap:8px;justify-content:center;flex-wrap:wrap;margin-top:8px}
  .gallery img{width:140px;height:90px;object-fit:cover;border-radius:8px;border:2px solid rgba(255,255,255,0.03)}
  .reveal{margin-top:14px;text-align:center;opacity:0;transform:translateY(10px);transition:all .6s}
  .reveal.show{opacity:1;transform:translateY(0)}
  .message{font-size:20px;color:#fff;margin-top:8px}
  .game{margin-top:16px;display:flex;gap:18px;justify-content:center;align-items:flex-start;flex-wrap:wrap}
  .t3{background:rgba(255,255,255,0.02);padding:12px;border-radius:12px}
  .board{display:grid;grid-template-columns:repeat(3,80px);gap:8px}
  .cell{width:80px;height:80px;display:flex;align-items:center;justify-content:center;font-size:36px;background:rgba(255,255,255,0.02);border-radius:10px;cursor:pointer}
  .small{font-size:13px;color:var(--muted);margin-top:8px;text-align:center}
  .video iframe, .tom img{max-width:100%;border-radius:8px}
  footer{margin-top:18px;text-align:center;color:var(--muted);font-size:13px}
  @media(max-width:760px){.board{grid-template-columns:repeat(3,64px)}.cell{width:64px;height:64px;font-size:28px}}
</style>
</head>
<body>
<div class="wrap">
  <h1>Happy Birthday forever‚ù§Ô∏è</h1>
  <div class="top">
    <div class="left">
      <div class="cake" id="cake">
        <div class="plate"></div>
        <div class="body"></div>
        <div class="candle" id="candle" title="Tap to blow out">
          <div class="wick"></div>
        </div>
        <div class="flame" id="flame"></div>
      </div>

      <div class="controls">
        <button id="blowBtn">Mic se blow karo (Allow mic)</button>
        <button id="shakeHint">Phone shake karo</button>
        <button id="resetCandle">Candle phir jalao</button>
      </div>

      <div class="reveal" id="revealMsg">
        <div class="message">üéâ Happy Birthday my forever‚ôæÔ∏èTumhari wishes poori ho me. me tume hamesha pareshan karu rulau or happy rakhu aesa tumse Aashirwad mangata hu üòÜü§ì‚ù§Ô∏è</div>
      </div>
    </div>

    <div class="right">
      <div class="gallery">
        <!-- Replace src with your uploaded image paths (or imgbb links) -->
        <img id="p1" src="https://via.placeholder.com/300x200?text=Photo+1" alt="Photo1">
        <img id="p2" src="https://via.placeholder.com/300x200?text=Photo+2" alt="Photo2">
      </div>

      <div class="tom" style="margin-top:10px">
        <!-- Replace with GIPHY/Tom & Jerry GIF link or upload to repo assets and point here -->
        <img id="gifTom" src="https://media.giphy.com/media/l0MYEqEzwMWFCg8rm/giphy.gif" alt="TomJerry" />
      </div>

      <div class="video" style="margin-top:10px">
        <!-- Replace with your YouTube embed (unlisted ok) -->
        <iframe id="yt" width="100%" height="180" src="https://www.youtube.com/embed/dQw4w9WgXcQ" title="video" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
      </div>
    </div>
  </div>

  <div class="game">
    <div class="t3">
      <div style="text-align:center;font-weight:600">Tic-Tac-Toe</div>
      <div class="board" id="board">
        <!-- 9 cells -->
        <div class="cell" data-i="0"></div>
        <div class="cell" data-i="1"></div>
        <div class="cell" data-i="2"></div>
        <div class="cell" data-i="3"></div>
        <div class="cell" data-i="4"></div>
        <div class="cell" data-i="5"></div>
        <div class="cell" data-i="6"></div>
        <div class="cell" data-i="7"></div>
        <div class="cell" data-i="8"></div>
      </div>
      <div class="small" id="status">Tumhara turn ‚Äî ‚ù§Ô∏è (O)</div>
      <div style="text-align:center;margin-top:8px">
        <button id="resetGame">Reset Game</button>
      </div>
    </div>
  </div>

  <footer>Customize images/GIF/video by editing <code>index.html</code> in your repo. Enjoy! üéÇ</footer>
</div>

<script>
/* ---------- Candle: tap, shake, blow ---------- */
const flame = document.getElementById('flame');
const candle = document.getElementById('candle');
const reveal = document.getElementById('revealMsg');
const resetCandleBtn = document.getElementById('resetCandle');
let isOut = false;

// Tap candle to toggle out
candle.addEventListener('click', () => extinguishBy('tap'));

// shake detection (device motion)
let lastZ = null, shakeCount = 0;
if (window.DeviceMotionEvent) {
  window.addEventListener('devicemotion', (e) => {
    const z = e.accelerationIncludingGravity ? e.accelerationIncludingGravity.z : 0;
    if (lastZ !== null) {
      const diff = Math.abs(z - lastZ);
      if (diff > 12) { // strong shake threshold
        shakeCount++;
        if (shakeCount > 1 && !isOut) extinguishBy('shake');
      }
    }
    lastZ = z;
  });
}

// microphone "blow" detection ‚Äî simple RMS threshold
const blowBtn = document.getElementById('blowBtn');
let audioStream = null, audioContext=null, analyser=null, dataArray=null;
blowBtn.addEventListener('click', async () => {
  if (isOut) return;
  try {
    audioStream = await navigator.mediaDevices.getUserMedia({ audio:true, video:false });
    audioContext = new (window.AudioContext||window.webkitAudioContext)();
    const source = audioContext.createMediaStreamSource(audioStream);
    analyser = audioContext.createAnalyser();
    analyser.fftSize = 512;
    dataArray = new Uint8Array(analyser.fftSize);
    source.connect(analyser);
    listenForBlow();
    blowBtn.textContent = 'Listening... blow on the mic!';
  } catch(err) {
    alert('Mic permission chahiye ‚Äî allow karo aur phir try karo.');
  }
});

function listenForBlow() {
  const check = () => {
    analyser.getByteTimeDomainData(dataArray);
    // compute RMS
    let sum=0;
    for(let i=0;i<dataArray.length;i++){
      const v = (dataArray[i]-128)/128;
      sum += v*v;
    }
    const rms = Math.sqrt(sum/dataArray.length);
    if (rms > 0.25 && !isOut) { // threshold for blow
      extinguishBy('blow');
      stopMic();
      blowBtn.textContent = 'Mic (done)';
      return;
    }
    requestAnimationFrame(check);
  };
  check();
}
function stopMic(){
  if(audioStream) audioStream.getTracks().forEach(t=>t.stop());
  if(audioContext) audioContext.close().catch(()=>{});
}

/* extinguish */
function extinguishBy(kind){
  if(isOut) return;
  isOut = true;
  flame.classList.add('hidden');
  reveal.classList.add('show');
  // small confetti text or sound (optional)
  console.log('Candle extinguished by', kind);
}
resetCandleBtn.addEventListener('click', () => {
  isOut = false;
  flame.classList.remove('hidden');
  reveal.classList.remove('show');
});

/* ---------- Tic Tac Toe (simple AI that plays second) ---------- */
const cells = Array.from(document.querySelectorAll('.cell'));
const status = document.getElementById('status');
let board = Array(9).fill(null); // null / 'O' / 'X'
const HUMAN = 'O'; // heart
const AI = 'X'; // party
const symbols = {O:'‚ù§Ô∏è', X:'ü•≥'};

function render(){
  cells.forEach((c,i)=> {
    c.textContent = board[i] ? symbols[board[i]] : '';
  });
}
function checkWin(b){
  const lines = [
    [0,1,2],[3,4,5],[6,7,8],
    [0,3,6],[1,4,7],[2,5,8],
    [0,4,8],[2,4,6]
  ];
  for(const [a,b1,c] of lines){
    if(b[a] && b[a]===b[b1] && b[a]===b[c]) return b[a];
  }
  return null;
}
function emptyIndices(b){ return b.map((v,i)=> v?null:i).filter(v=>v!==null); }

function aiMove(){
  // simple winning/blocking heuristic
  // try to win
  const empties = emptyIndices(board);
  for(const idx of empties){
    const copy = board.slice(); copy[idx]=AI;
    if(checkWin(copy)===AI){ board[idx]=AI; return; }
  }
  // block human
  for(const idx of empties){
    const copy = board.slice(); copy[idx]=HUMAN;
    if(checkWin(copy)===HUMAN){ board[idx]=AI; return; }
  }
  // else center, else random
  if(board[4]===null){ board[4]=AI; return; }
  const r = empties[Math.floor(Math.random()*empties.length)];
  board[r]=AI;
}

function humanPlay(i){
  if(board[i] || isGameOver()) return;
  board[i]=HUMAN;
  render();
  let winner = checkWin(board);
  if(winner){ status.textContent = winner==='O' ? 'Tum jeete! ‚ù§Ô∏è' : 'Computer jeeta! ü•≥'; return; }
  if(emptyIndices(board).length===0){ status.textContent='Draw!'; return; }
  // AI turn
  status.textContent = 'Computer soch raha...';
  setTimeout(()=> {
    aiMove();
    render();
    let w = checkWin(board);
    if(w){ status.textContent = w==='O' ? 'Tum jeete! ‚ù§Ô∏è' : 'Computer jeeta! ü•≥'; return; }
    if(emptyIndices(board).length===0){ status.textContent='Draw!'; return; }
    status.textContent = 'Tumhara turn ‚Äî ‚ù§Ô∏è (O)';
  }, 500);
}

function isGameOver(){ return checkWin(board) || emptyIndices(board).length===0; }

cells.forEach(c=>{
  c.addEventListener('click', ()=> humanPlay(parseInt(c.dataset.i)));
});

document.getElementById('resetGame').addEventListener('click', ()=>{
  board = Array(9).fill(null);
  render();
  status.textContent = 'Tumhara turn ‚Äî ‚ù§Ô∏è (O)';
});

render();

/* ---------- Helpful: replace placeholders hints (not required) ---------- */
// If you want to change images from repo assets, point src to e.g. "assets/photo1.jpg"
// Example: document.getElementById('p1').src = 'assets/photo1.jpg';
</script>
</body>
  </html>
